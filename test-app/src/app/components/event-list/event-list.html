<div class="container">
  <header class="header">
    <h1>–°–ø–∏—Å–æ–∫ –ø–æ–¥—ñ–π</h1>
    <a routerLink="/create" class="btn btn-primary">+ –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–æ–¥—ñ—é</a>
  </header>

  @if (events$ | async; as events) {

    @if (events.length === 0) {
      <div class="empty-state">–ü–æ–¥—ñ–π –Ω–µ–º–∞—î.</div>
    }

    <div class="event-grid">
      @for (event of events; track event.id) {
        <div class="event-card">
          <div class="card-body">

            <div class="card-header-row">
              <h3 class="card-title">{{ event.title }}</h3>
              <span class="badge" [class.paid]="event.type === 'PAID'">{{ event.type }}</span>
            </div>

            <div class="card-meta">
              @if (event.startTime) {
                <div class="date-row">
                  üïí {{ (event.startTime.toDate ? event.startTime.toDate() : event.startTime) | date:'short' }}
                  ‚Äî {{ (event.endTime.toDate ? event.endTime.toDate() : event.endTime) | date:'shortTime' }}
                </div>
              }

              <div class="capacity-row">
                üë• –£—á–∞—Å–Ω–∏–∫—ñ–≤: <strong>{{ event.countOfMembers }}</strong> / {{ event.capacity }}
              </div>
            </div>

          </div>

          <div class="card-actions">
            @if (event.id) {
              <a [routerLink]="['/edit', event.id]" class="btn-link">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
              <button (click)="onDelete(event.id!)" class="btn-delete">–í–∏–¥–∞–ª–∏—Ç–∏</button>
            }
          </div>
        </div>
      }
    </div>

  } @else {
    <div class="loading-state">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
  }
</div>
